<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,initial-scale=1.0,width=device-width"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
	<link rel="stylesheet" type="text/css" href="../css/app.css" />
</head>

<body>
	<button onclick='exeForVdom()' style="margin-top:10px;">点击测试vdom</button>
	<span style="height:2px;border:none;border-top:1px solid #555555;margin-top:10px;"></span>

</body>
<script>
	var Xo5j = {
		G: function(){
			console.log('mock Xo5j.G in: ' + JSON.stringify(arguments));
		},
		A: function(){
			console.log('mock Xo5j.A in: ' + JSON.stringify(arguments));
		},
		require: function(name){
			console.log('mock Xo5j.require in: ' + JSON.stringify(arguments));
			if('mam' == name){
				return "({checkUpdate: function(){console.log('mam checkUpdate in');return 'succees!'}})";
			}
		}
	};
</script>
<script src="../script/megi.min.js"></script>
<!-- <script src="./multiple.js"></script> -->
<script>
	function getUrlParam(name) {
	  var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
	  var r = window.location.search.substr(1).match(reg);
	  if (r != null) return decodeURI(r[2]); return null;
	}

	window.onload = function(){
		var page = getUrlParam('page');
		if(page){
			var head = document.head;
			var script = document.createElement('script');
			script.type = 'text/javascript';
			script.src = page + '.js';
			head.appendChild(script);
		}
	}

		function exeForVdom(e){
			api$_megi.$_start();
			$document.api$_page.apiready();
			/*
			for(var i in api$_megi){
				console.log(i);
			}
			*/

			/*
			var mam = api.require('mam');
			mam.checkUpdate();
			*/
			let child = $('#btn');
			var custom = new Event("click", {"bubbles":true, "cancelable":false, composed:true});
			//child.dispatchEvent(custom);
		}
	</script>
</html>
